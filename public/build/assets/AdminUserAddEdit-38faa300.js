import{A as S,r as d,j as a,S as N,B as I,a as x,b as p}from"./app-5644b4fb.js";import{A as M}from"./AdminAuthLayout-2fadfe93.js";import{F as t,I as i}from"./index-60d0a624.js";import{D as v}from"./index-d01c4534.js";import{S as c}from"./index-f414ce01.js";import{C as A}from"./index-c769860f.js";import{U as E}from"./UserOutlined-371a1dfe.js";import"./index-4f680648.js";import"./PurePanel-a6f7a4ac.js";function T({auth:h,user:l,educationLevels:r}){const{message:g,modal:w,notification:u}=S.useApp(),[j,m]=d.useState(!1),[o]=t.useForm(),[e,f]=d.useState({});d.useEffect(()=>{o.setFields([{name:"username",value:l.username},{name:"title",value:l.title},{name:"lname",value:l.lname},{name:"fname",value:l.fname},{name:"mname",value:l.mname},{name:"suffix",value:l.suffix},{name:"education_level",value:l.education_level},{name:"email",value:l.email},{name:"sex",value:l.sex},{name:"role",value:l.role},{name:"active",value:l.active?l.active>0:!1}])},[l]);const b=async n=>{if(m(!0),l&&l.id&&l.id>0)try{const s=await x.put("/admin/users/"+l.id,n);m(!1),s.data.status==="updated"&&(u.success({placement:"topRight",message:"Updated!",description:"User successfully updated."}),p.visit("/admin/users"))}catch(s){m(!1),s.response.status===422&&f(s.response.data.errors)}else try{const s=await x.post("/admin/users",n);m(!1),s.data.status==="saved"&&(u.success({placement:"topRight",message:"Saved!",description:"User successfully saved."}),p.visit("/admin/users"))}catch(s){m(!1),s.response.status===422&&f(s.response.data.errors)}};return a.jsxs(M,{user:h.user,children:[a.jsx(N,{title:"User Management"}),a.jsx("div",{className:"flex mt-10 justify-center items-center",children:a.jsxs("div",{className:`p-6 w-full mx-2 bg-white shadow-sm rounded-md
					sm:w-[640px]`,children:[a.jsx("div",{className:"font-bold mb-4 text-lg",children:"ADD / EDIT USER"}),a.jsxs(t,{layout:"vertical",autoComplete:"off",form:o,onFinish:b,initialValues:{title:"",username:"",password:"",password_confirmation:"",lname:"",fname:"",mname:"",suffix:"",email:"",sex:"",birthdate:null,birthplace:"",active:!0},children:[a.jsx(t.Item,{label:"Username",name:"username",validateStatus:e!=null&&e.username?"error":"",help:e!=null&&e.username?e==null?void 0:e.username[0]:"",children:a.jsx(i,{placeholder:"ex. juan1234",size:"large",readOnly:!0})}),a.jsx(v,{}),a.jsx(t.Item,{name:"title",label:"Title (Mr. / Ms. / Mrs.)",className:"w-full",validateStatus:e.title?"error":"",help:e.title?e.title[0]:"",children:a.jsx(c,{options:[{value:"MR",label:"MR."},{value:"MS",label:"MS."},{value:"MRS",label:"MRS."}]})}),a.jsxs("div",{className:"flex flex-col gap-x-4 sm:flex-row",children:[a.jsx(t.Item,{label:"Last Name",name:"lname",className:"w-full",validateStatus:e!=null&&e.lname?"error":"",help:e!=null&&e.lname?e==null?void 0:e.lname[0]:"",children:a.jsx(i,{placeholder:"ex. Dela Cruz",size:"large",autoComplete:"off"})}),a.jsx(t.Item,{label:"First Name",name:"fname",className:"w-full",validateStatus:e!=null&&e.fname?"error":"",help:e!=null&&e.fname?e==null?void 0:e.fname[0]:"",children:a.jsx(i,{placeholder:"ex. Juan",size:"large",autoComplete:"off"})})]}),a.jsxs("div",{className:"flex flex-col gap-x-4 sm:flex-row",children:[a.jsx(t.Item,{label:"Middle Name",name:"mname",className:"w-full",validateStatus:e!=null&&e.mname?"error":"",help:e!=null&&e.mname?e==null?void 0:e.mname[0]:"",children:a.jsx(i,{placeholder:"ex. Dela Cruz",size:"large"})}),a.jsx(t.Item,{label:"Suffix",name:"suffix",validateStatus:e!=null&&e.suffix?"error":"",help:e!=null&&e.suffix?e==null?void 0:e.suffix[0]:"",children:a.jsx(i,{placeholder:"ex. Jr, II, III",size:"large"})})]}),a.jsx(t.Item,{label:"Email",name:"email",validateStatus:e!=null&&e.email?"error":"",help:e!=null&&e.email?e==null?void 0:e.email[0]:"",children:a.jsx(i,{placeholder:"ex. juan@mail.com",size:"large"})}),a.jsx(t.Item,{name:"sex",label:"Sex",className:"w-full",validateStatus:e.sex?"error":"",help:e.sex?e.sex[0]:"",children:a.jsx(c,{options:[{value:"MALE",label:"MALE"},{value:"FEMALE",label:"FEMALE"}]})}),a.jsx(t.Item,{name:"education_level",label:"Education Level",className:"w-full",validateStatus:e.education_level?"error":"",help:e.education_level?e.education_level[0]:"",children:a.jsx(c,{options:r.map(n=>({value:n.education_level,label:n.education_level}))})}),a.jsx(t.Item,{name:"role",label:"Role",className:"w-full",validateStatus:e.role?"error":"",help:e.role?e.role[0]:"",children:a.jsx(c,{options:[{value:"MEMBER",label:"MEMBER"},{value:"BM",label:"BRANCH MANAGER"},{value:"ADMIN",label:"ADMINISTRATOR"}]})}),a.jsx(t.Item,{name:"active",valuePropName:"checked",className:"w-full",validateStatus:e.active?"error":"",help:e.active?e.active[0]:"",children:a.jsx(A,{children:"Active"})}),a.jsx(v,{}),a.jsx("div",{className:"flex flex-end mt-2",children:a.jsx(I,{className:"ml-auto font-bold",htmlType:"submit",loading:j,icon:a.jsx(E,{}),type:"primary",children:"UPDATE INFORMATION"})})]})]})})]})}export{T as default};
